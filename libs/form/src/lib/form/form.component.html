<form [formGroup]="formGroup" novalidate (ngSubmit)="handleSaveClick()">
  <div class="row">
    <div class="col" *ngFor="let field of configurations.fields">
      <ng-container [ngSwitch]="field.dataType">
        <div class="form-group" *ngSwitchCase="'text'">
          <label>
            <input [placeholder]="field.title" [formControlName]="field.name">
          </label>
          <div class="valid-feedback" *ngIf="formGroup.controls[field.name].hasError('required')">
            {{field.title}} is <strong>required</strong>
          </div>
        </div>
        <div class="form-group" *ngSwitchCase="'bool'">
          <div class="form-check">
            <input class="form-check-input" [value]="field.default" type="checkbox" [formControlName]="field.name"
                   [id]="field.name">
            <label class="form-check-label" [for]="field.name">
              {{field.title}}
            </label>
          </div>
        </div>
        <div class="form-group" *ngSwitchCase="'textarea'">
          <label>
            <textarea [placeholder]="field.title" [formControlName]="field.name"></textarea>
          </label>
        </div>
        <div class="form-group" *ngSwitchCase="'number'">
          <label>
            <input type="number" [placeholder]="field.title" [formControlName]="field.name">
          </label>
        </div>
        <fds-dropdown
          *ngSwitchCase="'dropdown'"
          [title]="field.title"
          [formControlName]="field.name"
          [storeService]="field.store"
          [key]="field.key"
          [text]="field.text"
          [valuePrimitive]="field.valuePrimitive"
          class="full-width">
        </fds-dropdown>
      </ng-container>
    </div>
  </div>

  <button *ngIf="!saving; else loading" class="btn btn-outline-dark" type="submit">{{configurations.controls.save.text}}</button>

</form>

<ng-template #loading>
  <div class="spinner-border" role="status">
    <span class="sr-only">Loading...</span>
  </div>
</ng-template>
